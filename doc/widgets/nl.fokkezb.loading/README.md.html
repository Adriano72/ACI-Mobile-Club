<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "Users/emanuele/Documents/Workspace/titanium/ACI-Mobile-Club/app/widgets/nl.fokkezb.loading/README.md", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#loading%20mask%20widget%20%20">Loading Mask Widget  </a>
      </div>
      <div class="heading h2">
        <a href="#overview">Overview</a>
      </div>
      <div class="heading h2">
        <a href="#screenshot">Screenshot</a>
      </div>
      <div class="heading h2">
        <a href="#features">Features</a>
      </div>
      <div class="heading h2">
        <a href="#quick%20start%20">Quick Start </a>
      </div>
      <div class="heading h2">
        <a href="#global%20vs%20local">Global vs Local</a>
      </div>
      <div class="heading h3">
        <a href="#types">Types</a>
      </div>
      <div class="heading h3">
        <a href="#native%20progress%20(android-only)">Native Progress (Android-only)</a>
      </div>
      <div class="heading h3">
        <a href="#window">Window</a>
      </div>
      <div class="heading h3">
        <a href="#view">View</a>
      </div>
      <div class="heading h2">
        <a href="#public%20api">Public API</a>
      </div>
      <div class="heading h3">
        <a href="#visible">visible</a>
      </div>
      <div class="heading h3">
        <a href="#progress%20(global-only)">progress (global-only)</a>
      </div>
      <div class="heading h3">
        <a href="#show(%5Bmessage%5D%2C%5Bcancelable%5D%5D)">show([message],[cancelable]])</a>
      </div>
      <div class="heading h3">
        <a href="#update(%5Bmessage%5D%2C%5Bcancelable%5D%5D)">update([message],[cancelable]])</a>
      </div>
      <div class="heading h3">
        <a href="#hide()">hide()</a>
      </div>
      <div class="heading h2">
        <a href="#styling">Styling</a>
      </div>
      <div class="heading h2">
        <a href="#internationalization">Internationalization</a>
      </div>
      <div class="heading h2">
        <a href="#changelog">Changelog</a>
      </div>
      <div class="heading h2">
        <a href="#license">License</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="docs markdown">
<div class="pilwrap" id="loading%20mask%20widget%20%20">
  <h1>
    <a href="#loading%20mask%20widget%20%20" name="loading%20mask%20widget%20%20" class="pilcrow">&#182;</a>
    Loading Mask Widget <a href="http://www.appcelerator.com/titanium/"><img src="http://www-static.appcelerator.com/badges/titanium-git-badge-sq.png" alt="Titanium" title="" /></a> <a href="http://www.appcelerator.com/alloy/"><img src="http://www-static.appcelerator.com/badges/alloy-git-badge-sq.png" alt="Alloy" title="" /></a>
  </h1>
</div>



<div class="pilwrap" id="overview">
  <h2>
    <a href="#overview" name="overview" class="pilcrow">&#182;</a>
    Overview
  </h2>
</div>


<p>This is a widget for the <a href="http://projects.appcelerator.com/alloy/docs/Alloy-bootstrap/index.html">Alloy</a> MVC framework of <a href="http://www.appcelerator.com">Appcelerator</a>'s <a href="http://www.appcelerator.com/platform">Titanium</a> platform.</p>

<p>The widget provides a simple loading mask that can be easily styled and configured.</p>

<p>By default it uses the native <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Android.ProgressIndicator">ProgressIndicator</a> for Android but you can easily switch to use the same cross-platform version on both iOS and Android.</p>


<div class="pilwrap" id="screenshot">
  <h2>
    <a href="#screenshot" name="screenshot" class="pilcrow">&#182;</a>
    Screenshot
  </h2>
</div>


<p><img src="https://raw.github.com/FokkeZB/nl.fokkezb.loading/master/docs/screenshot.png" alt="Loading Mask" title="" /> <img src="https://raw.github.com/FokkeZB/nl.fokkezb.loading/master/docs/android.png" alt="Loading Mask" title="" /></p>


<div class="pilwrap" id="features">
  <h2>
    <a href="#features" name="features" class="pilcrow">&#182;</a>
    Features
  </h2>
</div>


<ul>
<li>Fully stylable via your <code>app.tss</code>.</li>
<li>Can be set to be cancelable by user, setting a function to be called in that case.</li>
<li>Message and ability to be cancelled can be set every time it's used.</li>
<li>Can be via single global instance or local instances.</li>
<li>Available as native <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Android.ProgressIndicator">ProgressIndicator</a> (Android), Window and View.</li>
</ul>


<div class="pilwrap" id="quick%20start%20">
  <h2>
    <a href="#quick%20start%20" name="quick%20start%20" class="pilcrow">&#182;</a>
    Quick Start <a href="http://gitt.io/component/nl.fokkezb.loading"><img src="http://gitt.io/badge.png" alt="gitTio" title="" /></a>
  </h2>
</div>


<ul>
<li><p>Use <code>gittio install nl.fokkezb.loading</code> to install via <a href="http://gitt.io/cli">gitTio</a> or:</p>

<ul><li>Download the latest <a href="https://github.com/FokkeZB/nl.fokkezb.loading/releases">release</a> of the widget.</li>
<li>Unzip the folder to your project under <code>app/widgets/nl.fokkezb.loading</code>.</li>
<li>Add the widget as a dependency to your <code>app/config.json</code> file:</li></ul></li>
</ul>


<div class="highlight"><pre><code>    <span class="err">```</span><span class="nx">javascript</span>
    <span class="s2">&quot;dependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;nl.fokkezb.loading&quot;</span><span class="o">:</span><span class="s2">&quot;*&quot;</span>
    <span class="p">}</span>
    <span class="err">```</span>
</code></pre></div>



<ul>
<li>Create a global instance of the widget in <code>alloy.js</code>:</li>
</ul>


<div class="highlight"><pre><code><span class="err">```</span><span class="nx">javascript</span>
<span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">loading</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createWidget</span><span class="p">(</span><span class="s2">&quot;nl.fokkezb.loading&quot;</span><span class="p">);</span>
<span class="err">```</span>
</code></pre></div>



<ul>
<li>Show and hide the loading mask when you need it:</li>
</ul>


<div class="highlight"><pre><code><span class="err">```</span><span class="nx">javascript</span>
<span class="kd">function</span> <span class="nx">cancel</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Why?!&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">load</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">loading</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;Your message&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">Alloy</span><span class="p">.</span><span class="nx">Globals</span><span class="p">.</span><span class="nx">loading</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">6000</span><span class="p">);</span>
<span class="p">}</span>
<span class="err">```</span>
</code></pre></div>



<ul>
<li>In Titanium 3.3.0 you need to hide the Android Actionbar as <a href="http://www.appcelerator.com/blog/2014/08/hiding-the-android-actionbar/">described in this blog</a>. If you use Titanium 3.3.1 or later the widget automatically requests for a theme with no actionbar.</li>
</ul>


<div class="pilwrap" id="global%20vs%20local">
  <h2>
    <a href="#global%20vs%20local" name="global%20vs%20local" class="pilcrow">&#182;</a>
    Global vs Local
  </h2>
</div>


<p>The Quick Start shows how to use the global-mode. You only have to create one global widget instance that will (try to) make sure that there's always one loading mask showing. You can also use one of the 3 available types of loading masks directly as a local instance, as we'll see when we look at the types.</p>


<div class="pilwrap" id="types">
  <h3>
    <a href="#types" name="types" class="pilcrow">&#182;</a>
    Types
  </h3>
</div>


<p>The widget exposes different types of loading masks. All types share the same API so you can easily switch between them.</p>


<div class="pilwrap" id="native%20progress%20(android-only)">
  <h3>
    <a href="#native%20progress%20(android-only)" name="native%20progress%20(android-only)" class="pilcrow">&#182;</a>
    Native Progress (Android-only)
  </h3>
</div>


<p>The global default for Android is to use <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Android.ProgressIndicator">ProgressIndicator</a>. You can disable this by setting the <code>progress</code> property of the global widget to <code>false</code> or using one of the 2 other types directly in a local instance. The Native Progress type itself can also be used as a local instance:</p>


<div class="highlight"><pre><code><span class="kd">var</span> <span class="nx">myInstance</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createWidget</span><span class="p">(</span><span class="s1">&#39;nl.fokkezb.loading&#39;</span><span class="p">,</span> <span class="s1">&#39;progress&#39;</span><span class="p">);</span>
<span class="nx">myInstance</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;My message&#39;</span><span class="p">,</span> <span class="nx">myCancelCallback</span><span class="p">);</span>    
</code></pre></div>




<div class="pilwrap" id="window">
  <h3>
    <a href="#window" name="window" class="pilcrow">&#182;</a>
    Window
  </h3>
</div>


<p>The only available global mode for iOS is to show a Window. You can also create a local instance:</p>


<div class="highlight"><pre><code><span class="kd">var</span> <span class="nx">myInstance</span> <span class="o">=</span> <span class="nx">Alloy</span><span class="p">.</span><span class="nx">createWidget</span><span class="p">(</span><span class="s1">&#39;nl.fokkezb.loading&#39;</span><span class="p">,</span> <span class="s1">&#39;window&#39;</span><span class="p">);</span>
<span class="nx">myInstance</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;My message&#39;</span><span class="p">,</span> <span class="nx">myCancelCallback</span><span class="p">);</span>
</code></pre></div>




<div class="pilwrap" id="view">
  <h3>
    <a href="#view" name="view" class="pilcrow">&#182;</a>
    View
  </h3>
</div>


<p>You can also create the widget as a local view which you can require in any (composite) layout:</p>

<p><strong>index.xml</strong></p>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">Alloy</span>
    <span class="o">&lt;</span><span class="nx">Window</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Widget</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;nl.fokkezb.loading&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;view&quot;</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;myInstance&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/Window&gt;</span>
<span class="o">&lt;</span><span class="err">/Alloy&gt;</span>
</code></pre></div>



<p><strong>index.js</strong></p>


<div class="highlight"><pre><code><span class="nx">$</span><span class="p">.</span><span class="nx">myInstance</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="s1">&#39;My message&#39;</span><span class="p">,</span> <span class="nx">myCancelCallback</span><span class="p">);</span>
</code></pre></div>




<div class="pilwrap" id="public%20api">
  <h2>
    <a href="#public%20api" name="public%20api" class="pilcrow">&#182;</a>
    Public API
  </h2>
</div>


<p>All types share the same public API:</p>


<div class="pilwrap" id="visible">
  <h3>
    <a href="#visible" name="visible" class="pilcrow">&#182;</a>
    visible
  </h3>
</div>


<p>You'll get <code>TRUE</code> if the loading mask is currently shown. If set to <code>TRUE</code> or <code>FALSE</code> it will call <code>show()</code> or <code>hide()</code>.</p>


<div class="pilwrap" id="progress%20(global-only)">
  <h3>
    <a href="#progress%20(global-only)" name="progress%20(global-only)" class="pilcrow">&#182;</a>
    progress <em>(global-only)</em>
  </h3>
</div>


<p>Set to <code>FALSE</code> to use the cross-platform loading mask for Android instead of the default native <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Android.ProgressIndicator">ProgressIndicator</a>.</p>


<div class="pilwrap" id="show(%5Bmessage%5D%2C%5Bcancelable%5D%5D)">
  <h3>
    <a href="#show(%5Bmessage%5D%2C%5Bcancelable%5D%5D)" name="show(%5Bmessage%5D%2C%5Bcancelable%5D%5D)" class="pilcrow">&#182;</a>
    show([message],[cancelable]])
  </h3>
</div>


<p>Shows the loading mask or updates the existing, if it's still the top window. If the second argument is a function, the mask is user-cancelable at which event this method would be called.</p>


<div class="pilwrap" id="update(%5Bmessage%5D%2C%5Bcancelable%5D%5D)">
  <h3>
    <a href="#update(%5Bmessage%5D%2C%5Bcancelable%5D%5D)" name="update(%5Bmessage%5D%2C%5Bcancelable%5D%5D)" class="pilcrow">&#182;</a>
    update([message],[cancelable]])
  </h3>
</div>


<p>Updates the existing message and cancelable function.</p>


<div class="pilwrap" id="hide()">
  <h3>
    <a href="#hide()" name="hide()" class="pilcrow">&#182;</a>
    hide()
  </h3>
</div>


<p>Hides the loading mask.</p>


<div class="pilwrap" id="styling">
  <h2>
    <a href="#styling" name="styling" class="pilcrow">&#182;</a>
    Styling
  </h2>
</div>


<p>You can style all views from your <code>app.tss</code>. The default styles can be found in <a href="styles/window.tss">window.tss</a>. Be aware that the default styles are applied to classses, but to override from your <code>app.tss</code> you need to following (identical) IDs:</p>

<ul>
<li><code>#progressIndicator</code>: The native Android ProgressIndicator.</li>
<li><code>#loadingWindow</code>: The window if using the (default) window mode.</li>
<li><code>#loadingMask</code>: The full-screen mask.
<ul><li>Set <code>images</code> to <code>true</code> to use the <code>#loadingImages</code> indicator.</li></ul></li>
<li><code>#loadingOuter</code>: The dark box containing the activityIndicator and message.</li>
<li><code>#loadingInner</code>: Wraps arround the activityIndicator and message to provider padding.</li>
<li><code>#loadingIndicator</code>: The activityIndicator.</li>
<li><code>#loadingImages</code>: The indicator variant using images.</li>
<li><code>#loadingMessage</code>: The message.</li>
</ul>


<div class="pilwrap" id="internationalization">
  <h2>
    <a href="#internationalization" name="internationalization" class="pilcrow">&#182;</a>
    Internationalization
  </h2>
</div>


<p>You can override the default message (<code>Loading..</code>) by setting the <code>loadingMessage</code> in your <code>strings.xml</code> files.</p>


<div class="pilwrap" id="changelog">
  <h2>
    <a href="#changelog" name="changelog" class="pilcrow">&#182;</a>
    Changelog
  </h2>
</div>


<ul>
<li>1.8:
<ul><li>New <code>view</code> mode to get the loading mask as a view instead of a window.</li>
<li>Consistent public API's for all types and modes.</li></ul></li>
<li>1.7:
<ul><li>Uses native ProgressIndicator for Android</li>
<li>Uses the <code>theme</code> property to select a theme with no ActionBar.</li></ul></li>
<li>1.6: Complete rewrite
<ul><li>Widget creation now only in controller</li>
<li>Styling now only in TSS</li>
<li>Setting message and blocking now only via <code>show()</code></li>
<li>Cancel event replaced by callback as second argument for <code>show()</code></li>
<li>Second <code>show()</code> argument now <code>cancelable</code>, <em>reverse</em> of <code>blocking</code> (!!)</li>
<li>On Android, hitting the back button on a non-cancelable loading mask will move app to the background</li></ul></li>
<li>1.5.2: Fixes empty loading mask on second show on Android</li>
<li>1.5.1: Reverted 1.5 change thanks to <code>opacity</code> fix.</li>
<li>1.5: Falls back to <code>Ti.UI.Android.ProgressIndicator</code> for Android</li>
<li>1.4: Support for image indicator</li>
<li>1.3: Fully override widget style from <code>app.tss</code> and reset to default message upon show.</li>
<li>1.2: View replaced by Window, otherwise won't work in non-absolute layout modes.</li>
<li>1.1: New parameter <code>show</code> to automatically show loading mask upon creation.</li>
<li>1.0: Initial version</li>
</ul>


<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow">&#182;</a>
    License
  </h2>
</div>


<pre>
Copyright 2013-2014 Fokke Zandbergen

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   <a href='http://www.apache.org/licenses/LICENSE-2.0'>http://www.apache.org/licenses/LICENSE-2.0</a>

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</pre></div>
  </div>
</body>
</html>
